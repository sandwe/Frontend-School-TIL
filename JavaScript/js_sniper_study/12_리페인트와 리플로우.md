# 리페인트와 리플로우

> 렌더링 과정에서 레이아웃 단계와 페인트 단계를 다시 거치는 과정

<br>

## 리플로우(Reflow)

- 생성된 DOM 노드의 **레이아웃 변경**시 영향을 받는 모든 노드(부모, 자식)의 수치를 다시 계산하여 레이아웃 트리(렌더 트리)를 재생성하는 작업

<br>

### Reflow를 발생하게 하는 속성

- width, height, padding, margin, float, position 등등.. ➡️ **레이아웃에 영향을 주는 모든 속성**

<br>

## 리페인트(Repaint)

- Reflow 과정이 끝나고 재생성된 레이아웃 트리(렌더 트리)를 다시 레이어에 그리는 작업

<br>

### Repaint를 발생하게 하는 속성

- color, border-radius, background, box-shadow 등등.. ➡️ **시각적으로 보여지는 모든 속성**

<br>

## 리플로우와 리페인트가 렌더링 속도에 중요한 영향을 미치는 이유?

렌더링 과정은 **순차적**으로 진행된다.

- 각각의 렌더링 과정들은 반드시 **전 단계의 데이터**가 필요하다.
- 만약 전 단계에 변화가 일어나면 다음 단계에 모두 영향을 미친다.
- ex) 어떤 요소의 스타일이 변하게 되면 레이아웃도 변하게 되고, paint도 다시 일어난다.
- ex) 어떤 요소의 레이아웃이 변경되면 paint가 다시 일어난다.

➡️ Reflow, Repaint 해야할 요소가 많아지면 해야될 연산이 많아지게 되고, 결국 브라우저의 전체적인 성능에 영향을 미친다.

<br>

## 해결 방법

### 1. 애니메이션 구현시 CSS Transform 속성을 사용한다.

- transform을 사용해 애니메이션을 만들면 CPU 대신 GPU를 사용하여 화면 렌더링을 처리한다.
- CPU는 운영체제,브라우저 등 다양한 것을 구동하므로 이미 작업이 많은 상태일 것이다.
- GPU는 여러 개의 코어가 간단한 작업을 동시에 협업하는데 특화되어 있어 애니메이션을 빠르게 처리할 수 있다.

### 2. requestAnimationFrame 함수를 사용한다.

- requestAnimationFrame 함수는 자바스크립트를 통해 일어나는 애니메이션 정보를 브라우저에게 미리 알려준다.
- 자바스크립트 애니메이션이 프레임의 시작 시 실행되도록 보장한다.
